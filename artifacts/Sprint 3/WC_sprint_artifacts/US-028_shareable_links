US-08 — Create Shareable Link (Reporting Page Update)

Overview

For this update, I added the ability for users to generate a shareable link for the currently selected initiative report directly from the Reporting page.

The goal was to make reports easier to distribute without requiring users to download a file first. Instead of exporting a document, users can now generate a URL that points directly to the report.

This feature works entirely on the frontend. No backend routes, database tables, or external libraries were added.


---------------------------------------------------------------------
1. Frontend Integration — Shareable Link Button
---------------------------------------------------------------------

I added a “Create Shareable Link” button inside the existing Download toolbar.

File: src/app/reporting/page.js

The button appears in the same toolbar as the export format buttons (PDF, CSV, XLSX, HTML). It only renders when reportData exists, because the toolbar itself only renders in that condition.

This keeps the behavior consistent with the download feature and prevents users from generating links when no report is loaded.

Below is a breakdown of how the button behaves:

| Condition | Result |
|-----------|--------|
| reportData is null | Shareable button does not render |
| reportData exists | Button appears in toolbar |
| User selects new initiative | Generated link reflects new initiative |
| Button clicked | handleCreateShareableLink() runs |

Updated page layout now looks like:

Header
Back Button
Initiative Selector
Download Toolbar (PDF / CSV / XLSX / HTML / Create Shareable Link)
Report Dashboard

No existing components were removed or rewritten. The button was added alongside the existing download buttons.


---------------------------------------------------------------------
2. Link Generation Logic — handleCreateShareableLink()
---------------------------------------------------------------------

Inside the ReportingPage component, I created a new function:

function handleCreateShareableLink()

This function generates a dynamic URL based on:

- The current domain (window.location.origin)
- The current reportId
- The current initiativeId

The generated link follows this structure:

/reporting?reportId={reportId}&initiativeId={initiativeId}

Here’s the general logic flow:

| Step | Action |
|------|--------|
| 1 | Validate reportData and selectedInitiative |
| 2 | Construct shareable URL with query parameters |
| 3 | Attempt to copy URL to clipboard |
| 4 | If clipboard fails, show fallback prompt |

The clipboard copy uses:

navigator.clipboard.writeText()

If clipboard access fails (browser restriction, permissions, etc.), the system falls back to:

window.prompt("Copy this shareable report link:", shareableUrl)

This ensures the link is always retrievable, even in restricted environments.


---------------------------------------------------------------------
3. Why Query Parameters Were Used
---------------------------------------------------------------------

Instead of creating a new backend route or storing share tokens in the database, I used query parameters.

This keeps the feature lightweight and avoids introducing:

- Authentication changes
- Database schema updates
- Token generation logic
- Expiration handling

The link simply encodes which report should be displayed.

Example format:

https://yourdomain.com/reporting?reportId=123&initiativeId=7

Because the page already loads reports dynamically based on selected initiative, this approach integrates cleanly with the existing architecture.


---------------------------------------------------------------------
Technical Impact Summary
---------------------------------------------------------------------

This feature was intentionally minimal and frontend-only.

| Area | Change |
|------|--------|
| Database | None |
| Backend API | None |
| External Libraries | None |
| Existing Download Logic | Preserved |
| State Management | Unchanged |
| Routing Structure | Unchanged |

Only one new function and one new button were added.


---------------------------------------------------------------------
User Experience Improvements
---------------------------------------------------------------------

This change improves report sharing flexibility.

| Before | After |
|--------|-------|
| Reports must be downloaded to share | Reports can be shared via direct link |
| No quick way to send report access | One-click link generation |
| Sharing required file attachment | Sharing can be done via URL |

Overall, this update enhances collaboration by allowing users to distribute reports instantly, while keeping the implementation lightweight and fully client-side.